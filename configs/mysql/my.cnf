[mysqld]
# Basic settings
datadir=/var/lib/mysql
socket=/var/run/mysqld/mysqld.sock
secure-file-priv=/var/lib/mysql-files
user=mysql

# Network settings
bind-address=0.0.0.0
mysqlx-bind-address=0.0.0.0

# Performance and security
performance_schema=ON
default_authentication_plugin=mysql_native_password

# Enhanced security settings
sql_mode=STRICT_ALL_TABLES,NO_ENGINE_SUBSTITUTION
local_infile=0
symbolic_links=0

# Connection and resource limits
max_connections=150
max_user_connections=100
max_connect_errors=100
connect_timeout=15
wait_timeout=3600
interactive_timeout=3600

# Logging configurations
log-error=/var/log/mysql/error.log
log-error-verbosity=3  # More detailed error logging
slow-query-log=1
slow-query-log-file=/var/log/mysql/slow.log
long_query_time=1  # Capture queries longer than 1 second
general-log=1
general-log-file=/var/log/mysql/general.log

# Replication and monitoring
server-id=1
log_bin=/var/log/mysql/mysql-bin.log
binlog_format=row
binlog_expire_logs_seconds=604800  # Keep binary logs for 7 days

# InnoDB performance tuning
innodb_buffer_pool_size=256M
innodb_log_file_size=128M
innodb_flush_method=O_DIRECT
innodb_flush_log_at_trx_commit=2

# Query cache (deprecated in MySQL 8.0, but kept for compatibility)
query_cache_type=0
query_cache_size=0

# Performance schema configuration
performance_schema_consumer_events_stages_current=ON
performance_schema_consumer_events_statements_current=ON
performance_schema_consumer_events_waits_current=ON

# Temporary table size limit
tmp_table_size=64M
max_heap_table_size=64M
